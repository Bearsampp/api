\doxysection{E\+:/\+Bearsampp-\/development/sandbox/core/libs/winbinder/db/db\+\_\+common.inc.\+php File Reference}
\label{db__common_8inc_8php}\index{E:/Bearsampp-\/development/sandbox/core/libs/winbinder/db/db\_common.inc.php@{E:/Bearsampp-\/development/sandbox/core/libs/winbinder/db/db\_common.inc.php}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\textbf{ db\+\_\+close\+\_\+database} ()
\item 
\textbf{ db\+\_\+create\+\_\+database} (\$database, \$server="{}"{}, \$username="{}"{}, \$password="{}"{})
\item 
\textbf{ db\+\_\+create\+\_\+field} (\$tablename, \$field, \$type)
\item 
\textbf{ db\+\_\+create\+\_\+record} (\$tablename, \$fieldnames=null, \$fieldvalues=null, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+create\+\_\+table} (\$tablename, \$fieldnames, \$fieldattrib, \$idfield="{}id"{}, \$valarray=null)
\item 
\textbf{ db\+\_\+delete\+\_\+field} (\$tablename, \$field)
\item 
\textbf{ db\+\_\+delete\+\_\+records} (\$tablename, \$idarray, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+delete\+\_\+table} (\$tablename)
\item 
\textbf{ db\+\_\+edit\+\_\+field} (\$tablename, \$field, \$type)
\item 
\textbf{ db\+\_\+edit\+\_\+record} (\$tablename, \$id=0, \$fieldnames=null, \$fieldvalues=null, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+escape\+\_\+string} (\$str)
\item 
\textbf{ db\+\_\+fetch\+\_\+array} (\$result, \$type=\textbf{ FETCH\+\_\+\+NUM})
\item 
\textbf{ db\+\_\+free\+\_\+result} (\$result)
\item 
\textbf{ db\+\_\+get\+\_\+data} (\$tablename, \$id=null, \$col=null, \$where="{}"{}, \$result\+\_\+type=\textbf{ FETCH\+\_\+\+NUM}, \$idfield="{}id"{}, \$orderby="{}"{})
\item 
\textbf{ db\+\_\+get\+\_\+id} (\$tablename, \$index, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+get\+\_\+index} (\$tablename, \$id, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+get\+\_\+info} (\$info="{}"{})
\item 
\textbf{ db\+\_\+get\+\_\+next\+\_\+free\+\_\+id} (\$tablename, \$idfield="{}id"{})
\item 
\textbf{ db\+\_\+list\+\_\+database\+\_\+tables} ()
\item 
\textbf{ db\+\_\+list\+\_\+table\+\_\+fields} (\$tablename, \$type=false)
\item 
\textbf{ db\+\_\+open\+\_\+database} (\$database, \$server="{}"{}, \$username="{}"{}, \$password="{}"{})
\item 
\textbf{ db\+\_\+query} (\$query)
\item 
\textbf{ db\+\_\+rename\+\_\+field} (\$tablename, \$field, \$newname, \$type)
\item 
\textbf{ db\+\_\+rename\+\_\+table} (\$tablename, \$newname)
\item 
\textbf{ db\+\_\+swap\+\_\+records} (\$tablename, \$id1, \$id2, \$idfield="{}id"{}, \$xchangeid=true)
\item 
\textbf{ db\+\_\+table\+\_\+exists} (\$tablename)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ \$\+\_\+mainpath} = pathinfo(\+\_\+\+\_\+\+FILE\+\_\+\+\_\+)
\item 
const \textbf{ DB\+\_\+\+WRAPVERSION} "{}db\+\_\+v2b"{}
\item 
\textbf{ if} (!defined("{}APPPREFIX"{})) define("{}APPPREFIX"{}
\end{DoxyCompactItemize}


\label{doc-func-members}
\doxysubsection{Function Documentation}
\index{db\_common.inc.php@{db\_common.inc.php}!db\_close\_database@{db\_close\_database}}
\index{db\_close\_database@{db\_close\_database}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_close\_database()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ace8bf9eeee6d4c726079e90a20294368} 
db\+\_\+close\+\_\+database (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+close\+\_\+database()}{p.}{d9/d92/db__common_8inc_8php_ace8bf9eeee6d4c726079e90a20294368}

\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 113} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00114\ \{}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_close\_database();}
\DoxyCodeLine{00116\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+close\+\_\+database()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_create\_database@{db\_create\_database}}
\index{db\_create\_database@{db\_create\_database}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_create\_database()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ab40fe3f70ae6165563ee0ba0b7fa2131} 
db\+\_\+create\+\_\+database (\begin{DoxyParamCaption}\item[{}]{\$database}{, }\item[{}]{\$server}{ = {\ttfamily "{}"{}}, }\item[{}]{\$username}{ = {\ttfamily "{}"{}}, }\item[{}]{\$password}{ = {\ttfamily "{}"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+create\+\_\+database()}{p.}{d9/d92/db__common_8inc_8php_ab40fe3f70ae6165563ee0ba0b7fa2131} Creates a database if it does not exist


\begin{DoxyParams}[1]{Parameters}
 & {\em \$database} & \\
\hline
string & {\em \$server} & \\
\hline
string & {\em \$username} & \\
\hline
string & {\em \$password} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
resource or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 77} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00078\ \{}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_create\_database(\$database,\ \$server,\ \$username\ ,\ \$password);}
\DoxyCodeLine{00080\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+create\+\_\+database()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_create\_field@{db\_create\_field}}
\index{db\_create\_field@{db\_create\_field}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_create\_field()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_af461f77bc6883f94a9fb1689baf7c4d3} 
db\+\_\+create\+\_\+field (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$field}{, }\item[{}]{\$type}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+create\+\_\+field()}{p.}{d9/d92/db__common_8inc_8php_af461f77bc6883f94a9fb1689baf7c4d3}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$field} & \\
\hline
{\em \$type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 248} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00249\ \{}
\DoxyCodeLine{00250\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_create\_field(APPPREFIX\ .\ \$tablename,\ \$field,\ \$type);}
\DoxyCodeLine{00251\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+create\+\_\+field()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_create\_record@{db\_create\_record}}
\index{db\_create\_record@{db\_create\_record}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_create\_record()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a8833c99dd19a96686010d6186d464f23} 
db\+\_\+create\+\_\+record (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$fieldnames}{ = {\ttfamily null}, }\item[{}]{\$fieldvalues}{ = {\ttfamily null}, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+create\+\_\+record()}{p.}{d9/d92/db__common_8inc_8php_a8833c99dd19a96686010d6186d464f23}

Insert a new record in table \$tablename.


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & Table name. If NULL uses the table used in last function call. \\
\hline
unknown & {\em \$fieldnames} & Array or CSV string with field names, one per line. \\
\hline
unknown & {\em \$fieldvalues} & Array or CSV string with field values, one per line. \\
\hline
string & {\em \$idfield} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
id of the affected record, FALSE if not succeded 
\end{DoxyReturn}


Definition at line \textbf{ 304} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00305\ \{}
\DoxyCodeLine{00306\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00309\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00310\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fieldnames)\ \{}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \$fieldnames\ =\ db\_list\_table\_fields(\$tablename);}
\DoxyCodeLine{00314\ \ \ \ \ \ \ array\_shift(\$fieldnames);}
\DoxyCodeLine{00315\ \ \ \ \ \}}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fieldvalues)\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \$fieldvalues\ =\ array\_fill(0,\ count(\$fieldnames),\ 0);}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \textcolor{comment}{//\ Get\ next\ available\ index}}
\DoxyCodeLine{00321\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}SELECT\ max(\$idfield)\ FROM\ "{}}\ .\ APPPREFIX\ .\ \$tablename;}
\DoxyCodeLine{00322\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00323\ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00325\ \ \ \}}
\DoxyCodeLine{00326\ \ \ \$newid\ =\ (db\_fetch\_array(\$result,\ FETCH\_NUM))\ ;}
\DoxyCodeLine{00327\ \ \ \$newid\ =\ \$newid[0]\ +\ 1;}
\DoxyCodeLine{00328\ \ \ \textcolor{comment}{//\ Build\ the\ two\ arrays}}
\DoxyCodeLine{00329\ \ \ \$names\ =\ is\_string(\$fieldnames)\ ?\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n]/"{}},\ \$fieldnames)\ :\ \$fieldnames;}
\DoxyCodeLine{00330\ \ \ \$values\ =\ is\_string(\$fieldvalues)\ ?\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n]/"{}},\ \$fieldvalues)\ :\ \$fieldvalues;}
\DoxyCodeLine{00331\ \ \ \textcolor{keywordflow}{if}\ (count(\$names)\ !=\ count(\$values))\ \{}
\DoxyCodeLine{00332\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ both\ arrays\ must\ be\ same\ length.\(\backslash\)n"{}});}
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00334\ \ \ \}}
\DoxyCodeLine{00335\ \ \ \textcolor{comment}{//\ Build\ the\ SQL\ query}}
\DoxyCodeLine{00336\ \ \ \$nfields\ =\ count(\$names);}
\DoxyCodeLine{00337\ \ \ \$fieldnames\ =\ \$names;}
\DoxyCodeLine{00338\ \ \ \$fieldvalues\ =\ \$values;}
\DoxyCodeLine{00339\ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0,\ \$names\ =\ \textcolor{stringliteral}{"{}"{}};\ \$i\ <\ \$nfields;\ \$i++)}
\DoxyCodeLine{00340\ \ \ \$names\ .=\ \$fieldnames[\$i]\ .\ (\$i\ <\ \$nfields\ -\/\ 1\ ?\ \textcolor{stringliteral}{"{},\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0,\ \$values\ =\ \textcolor{stringliteral}{"{}"{}};\ \$i\ <\ \$nfields;\ \$i++)}
\DoxyCodeLine{00342\ \ \ \$values\ .=\ \textcolor{stringliteral}{"{}'"{}}\ .\ db\_escape\_string(\$fieldvalues[\$i])\ .\ \textcolor{stringliteral}{"{}'"{}}\ .\ (\$i\ <\ \$nfields\ -\/\ 1\ ?\ \textcolor{stringliteral}{"{},\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}INSERT\ INTO\ "{}}\ .\ APPPREFIX\ .\ \$tablename\ .\ \textcolor{stringliteral}{"{}\ (\$idfield,\ \$names)\ VALUES\ (\$newid,\ \$values)"{}};}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00347\ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00348\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ create\ new\ record\ in\ table\ \$tablename."{}});}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00350\ \ \ \}}
\DoxyCodeLine{00351\ \ \ \textcolor{keywordflow}{return}\ \$newid;}
\DoxyCodeLine{00352\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+escape\+\_\+string()}, \textbf{ db\+\_\+fetch\+\_\+array()}, \textbf{ db\+\_\+list\+\_\+table\+\_\+fields()}, \textbf{ FETCH\+\_\+\+NUM}, and \textbf{ raw\+\_\+db\+\_\+query()}.



Referenced by \textbf{ db\+\_\+create\+\_\+table()}, and \textbf{ db\+\_\+edit\+\_\+record()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_create\_table@{db\_create\_table}}
\index{db\_create\_table@{db\_create\_table}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_create\_table()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a936f838f8c0e21031350e9354cab55d5} 
db\+\_\+create\+\_\+table (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$fieldnames}{, }\item[{}]{\$fieldattrib}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}, }\item[{}]{\$valarray}{ = {\ttfamily null}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+create\+\_\+table()}{p.}{d9/d92/db__common_8inc_8php_a936f838f8c0e21031350e9354cab55d5}


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
 & {\em \$fieldnames} & ( beside "{}id"{} ) \\
\hline
 & {\em \$fieldattrib} & \\
\hline
string & {\em \$idfield} & ( set to "{}id"{} ) \\
\hline
array & {\em \$valarray} & ( \$valarray[0] = 1.\+record, \$valarray[1] = 2.\+record, ... ) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} if Table already exists, could not create Table, could not create Records 
\end{DoxyReturn}


Definition at line \textbf{ 144} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00145\ \{}
\DoxyCodeLine{00146\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{if}\ (\$tablename\ ==\ \textcolor{keyword}{null}\ ||\ \$tablename\ ==\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00149\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00150\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \textcolor{keywordflow}{if}\ (db\_table\_exists(\$tablename))}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \textcolor{keywordflow}{if}\ (is\_string(\$fieldnames))}
\DoxyCodeLine{00156\ \ \ \ \ \$fieldnames\ =\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n,]/"{}},\ \$fieldnames);}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{if}\ (is\_string(\$fieldattrib))}
\DoxyCodeLine{00158\ \ \ \ \ \$fieldattrib\ =\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n,]/"{}},\ \$fieldattrib);}
\DoxyCodeLine{00159\ \ \ \$attribs\ =\ count(\$fieldattrib);}
\DoxyCodeLine{00160\ \ \ \textcolor{keywordflow}{if}\ (count(\$fieldnames)\ !=\ \$attribs)\ \{}
\DoxyCodeLine{00161\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ both\ arrays\ must\ be\ same\ length."{}});}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00163\ \ \ \}}
\DoxyCodeLine{00164\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}CREATE\ TABLE\ "{}}\ .\ APPPREFIX\ .\ \textcolor{stringliteral}{"{}\$tablename\ ("{}};}
\DoxyCodeLine{00165\ \ \ \$sql\ .=\ \textcolor{stringliteral}{"{}\$idfield\ int(11)\ NOT\ NULL\ PRIMARY\ KEY\ "{}};}
\DoxyCodeLine{00166\ \ \ \textcolor{keywordflow}{if}\ (\$attribs\ !=\ 0)\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \$sql\ .=\ \textcolor{stringliteral}{"{},\ "{}};}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0;\ \$i\ <\ \$attribs;\ \$i++)}
\DoxyCodeLine{00170\ \ \ \ \ \$sql\ .=\ \$fieldnames[\$i]\ .\ \textcolor{stringliteral}{"{}\ "{}}\ .\ \$fieldattrib[\$i]\ .\ (\$i\ <\ \$attribs\ -\/\ 1\ ?\ \textcolor{stringliteral}{"{},\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00171\ \ \ \}}
\DoxyCodeLine{00172\ \ \ \$sql\ .=\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{00173\ \ \ \textcolor{comment}{//\ Send\ the\ sql\ command}}
\DoxyCodeLine{00174\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00175\ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ create\ table\ \$tablename."{}});}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00178\ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \textcolor{keywordflow}{if}\ (\$valarray)}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{foreach}(\$valarray\ as\ \$values)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \$result\ =\ db\_create\_record(\$tablename,\ \$fieldnames,\ \$values,\ \$idfield);}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ ===\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \}}
\DoxyCodeLine{00187\ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{00188\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+create\+\_\+record()}, \textbf{ db\+\_\+table\+\_\+exists()}, and \textbf{ raw\+\_\+db\+\_\+query()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_delete\_field@{db\_delete\_field}}
\index{db\_delete\_field@{db\_delete\_field}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_delete\_field()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a1a402d0c8c4bfe1ce6fa22b80a38c682} 
db\+\_\+delete\+\_\+field (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$field}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+delete\+\_\+field()}{p.}{d9/d92/db__common_8inc_8php_a1a402d0c8c4bfe1ce6fa22b80a38c682}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$field} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 260} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00261\ \{}
\DoxyCodeLine{00262\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_delete\_field(APPPREFIX\ .\ \$tablename,\ \$field);}
\DoxyCodeLine{00263\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+delete\+\_\+field()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_delete\_records@{db\_delete\_records}}
\index{db\_delete\_records@{db\_delete\_records}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_delete\_records()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ae83a69515cbe0c60c6a894fa416860bf} 
db\+\_\+delete\+\_\+records (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$idarray}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+delete\+\_\+records()}{p.}{d9/d92/db__common_8inc_8php_ae83a69515cbe0c60c6a894fa416860bf}

Delete record from table \$tablename.


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$idarray} & the id or id array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 363} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00364\ \{}
\DoxyCodeLine{00365\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \textcolor{keywordflow}{if}\ (\$idarray\ ==\ \textcolor{keyword}{null}\ ||\ \$idarray\ <=\ 0)}
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00369\ \ \ \textcolor{keywordflow}{if}\ (!is\_array(\$idarray))}
\DoxyCodeLine{00370\ \ \ \ \ \$idarray\ =\ array(\$idarray);}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00373\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00374\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \ \ \textcolor{keywordflow}{foreach}(\$idarray\ as\ \$item)\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{comment}{//\ Send\ the\ SQL\ command}}
\DoxyCodeLine{00378\ \ \ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}DELETE\ FROM\ "{}}\ .\ APPPREFIX\ .\ \$tablename\ .\ \textcolor{stringliteral}{"{}\ WHERE\ \$idfield\ =\ "{}}\ .\ \$item;}
\DoxyCodeLine{00379\ \ \ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00380\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ delete\ record\ \$id\ in\ table\ \$tablename."{}});}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00383\ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \}}
\DoxyCodeLine{00385\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00386\ \}}

\end{DoxyCode}


References \textbf{ \$result}, and \textbf{ raw\+\_\+db\+\_\+query()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_delete\_table@{db\_delete\_table}}
\index{db\_delete\_table@{db\_delete\_table}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_delete\_table()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ae43cfcea99ecca78b6ef1e1e9c22c8e9} 
db\+\_\+delete\+\_\+table (\begin{DoxyParamCaption}\item[{}]{\$tablename}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+delete\+\_\+table()}{p.}{d9/d92/db__common_8inc_8php_ae43cfcea99ecca78b6ef1e1e9c22c8e9}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 196} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00197\ \{}
\DoxyCodeLine{00198\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00201\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00202\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \textcolor{keywordflow}{if}\ (\$tablename\ ==\ \textcolor{keyword}{null}\ ||\ \$tablename\ ==\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00206\ \ \ \textcolor{keywordflow}{if}\ (db\_table\_exists(\$tablename))}
\DoxyCodeLine{00207\ \ \ \ \ \$result\ =\ raw\_db\_query(\textcolor{stringliteral}{"{}DROP\ table\ "{}}\ .\ APPPREFIX\ .\ \$tablename);}
\DoxyCodeLine{00208\ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{00209\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+table\+\_\+exists()}, and \textbf{ raw\+\_\+db\+\_\+query()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_edit\_field@{db\_edit\_field}}
\index{db\_edit\_field@{db\_edit\_field}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_edit\_field()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_adfa1e7c6bc781d1c447652ae4515a4b3} 
db\+\_\+edit\+\_\+field (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$field}{, }\item[{}]{\$type}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+edit\+\_\+field()}{p.}{d9/d92/db__common_8inc_8php_adfa1e7c6bc781d1c447652ae4515a4b3} edit field attribute


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$field} & \\
\hline
{\em \$type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 288} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00289\ \{}
\DoxyCodeLine{00290\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_edit\_field(APPPREFIX\ .\ \$tablename,\ \$field,\ \$type);}
\DoxyCodeLine{00291\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+edit\+\_\+field()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_edit\_record@{db\_edit\_record}}
\index{db\_edit\_record@{db\_edit\_record}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_edit\_record()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a3fceaf1354f4886f8e6d9ce79b9f0ce1} 
db\+\_\+edit\+\_\+record (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$id}{ = {\ttfamily 0}, }\item[{}]{\$fieldnames}{ = {\ttfamily null}, }\item[{}]{\$fieldvalues}{ = {\ttfamily null}, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+edit\+\_\+record()}{p.}{d9/d92/db__common_8inc_8php_a3fceaf1354f4886f8e6d9ce79b9f0ce1}

Edits a record from table \$tablename. If \$id is null, zero or $<$ 0, inserts a new record.


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & If NULL uses the table used in last function call. \\
\hline
integer & {\em \$id} & \\
\hline
unknown & {\em \$fieldnames} & Array or CSV string with field names, one per line. If NULL, affects all fields. \\
\hline
unknown & {\em \$fieldvalues} & Array or CSV string with field values, one per line. \\
\hline
string & {\em \$idfield} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
id of the affected record or FALSE on error 
\end{DoxyReturn}


Definition at line \textbf{ 400} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00401\ \{}
\DoxyCodeLine{00402\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \textcolor{keywordflow}{if}\ (\$id\ ==\ \textcolor{keyword}{null}\ ||\ \$id\ <=\ 0)\ \{\ \textcolor{comment}{//\ Create\ a\ new\ record}}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keywordflow}{return}\ db\_create\_record(\$tablename,\ \$fieldnames,\ \$fieldvalues,\ \$idfield);}
\DoxyCodeLine{00406\ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \textcolor{comment}{//\ Edit\ existing\ record}}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00409\ \ \ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{comment}{//\ Build\ the\ two\ arrays}}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fieldnames)\ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \$fieldnames\ =\ db\_list\_table\_fields(\$tablename);}
\DoxyCodeLine{00413\ \ \ \ \ \ \ array\_shift(\$fieldnames);}
\DoxyCodeLine{00414\ \ \ \ \ \}}
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$fieldvalues)\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \$fieldvalues\ =\ array\_fill(0,\ count(\$fieldnames),\ 0);}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ \}}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \ \ \$names\ =\ is\_string(\$fieldnames)\ ?\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n]/"{}},\ \$fieldnames)\ :\ \$fieldnames;}
\DoxyCodeLine{00421\ \ \ \ \ \$values\ =\ is\_string(\$fieldvalues)\ ?\ preg\_split(\textcolor{stringliteral}{"{}/[\(\backslash\)r\(\backslash\)n]/"{}},\ \$fieldvalues)\ :\ \$fieldvalues;}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \textcolor{keywordflow}{if}\ (count(\$names)\ !=\ count(\$values))\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ both\ arrays\ must\ be\ same\ length.\(\backslash\)n"{}});}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00426\ \ \ \ \ \}}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//\ Build\ the\ SQL\ query}}
\DoxyCodeLine{00428\ \ \ \ \ \$nfields\ =\ count(\$names);}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0,\ \$str\ =\ \textcolor{stringliteral}{"{}"{}};\ \$i\ <\ \$nfields;\ \$i++)\ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \$str\ .=\ \$names[\$i]\ .\ \textcolor{stringliteral}{"{}='"{}}\ .\ db\_escape\_string(\$values[\$i])\ .\ \textcolor{stringliteral}{"{}'"{}}\ .}
\DoxyCodeLine{00431\ \ \ \ \ \ \ (\$i\ <\ \$nfields\ -\/\ 1\ ?\ \textcolor{stringliteral}{"{},\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00432\ \ \ \ \ \}}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00434\ \ \ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}UPDATE\ "{}}\ .\ APPPREFIX\ .\ \textcolor{stringliteral}{"{}\$tablename\ SET\ \$str\ WHERE\ \$idfield=\$id"{}};}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{comment}{//\ Send\ the\ SQL\ command}}
\DoxyCodeLine{00436\ \ \ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00438\ \ \ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ edit\ record\ \$id\ in\ table\ \$tablename."{}});}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00440\ \ \ \ \ \}}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keywordflow}{return}\ \$id;}
\DoxyCodeLine{00442\ \ \ \}}
\DoxyCodeLine{00443\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+create\+\_\+record()}, \textbf{ db\+\_\+escape\+\_\+string()}, \textbf{ db\+\_\+list\+\_\+table\+\_\+fields()}, and \textbf{ raw\+\_\+db\+\_\+query()}.



Referenced by \textbf{ db\+\_\+swap\+\_\+records()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_escape\_string@{db\_escape\_string}}
\index{db\_escape\_string@{db\_escape\_string}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_escape\_string()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a02c13438850f207c9f167715f45a1e24} 
db\+\_\+escape\+\_\+string (\begin{DoxyParamCaption}\item[{}]{\$str}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+escape\+\_\+string()}{p.}{d9/d92/db__common_8inc_8php_a02c13438850f207c9f167715f45a1e24}


\begin{DoxyParams}{Parameters}
{\em \$str} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string escaped 
\end{DoxyReturn}
string mysql\+\_\+real\+\_\+escape\+\_\+string ( string unescaped\+\_\+string [, resource link\+\_\+identifier])

Definition at line \textbf{ 732} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00733\ \{}
\DoxyCodeLine{00737\ }
\DoxyCodeLine{00738\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_escape\_string(\$str);}
\DoxyCodeLine{00739\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+escape\+\_\+string()}.



Referenced by \textbf{ db\+\_\+create\+\_\+record()}, and \textbf{ db\+\_\+edit\+\_\+record()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_fetch\_array@{db\_fetch\_array}}
\index{db\_fetch\_array@{db\_fetch\_array}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_fetch\_array()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ae530fae07afd2611bf93f712d99dfa95} 
db\+\_\+fetch\+\_\+array (\begin{DoxyParamCaption}\item[{}]{\$result}{, }\item[{}]{\$type}{ = {\ttfamily \textbf{ FETCH\+\_\+\+NUM}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+fetch\+\_\+array()}{p.}{d9/d92/db__common_8inc_8php_ae530fae07afd2611bf93f712d99dfa95}


\begin{DoxyParams}{Parameters}
{\em \$result} & \\
\hline
{\em \$type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array 
\end{DoxyReturn}
array mysql\+\_\+fetch\+\_\+array ( resource result [, int result\+\_\+type]) int type MYSQL\+\_\+\+ASSOC, MYSQL\+\_\+\+NUM ( == fetch\+\_\+row), and MYSQL\+\_\+\+BOTH

Definition at line \textbf{ 705} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00706\ \{}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_fetch\_array(\$result,\ \$type);}
\DoxyCodeLine{00713\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ FETCH\+\_\+\+NUM}, and \textbf{ raw\+\_\+db\+\_\+fetch\+\_\+array()}.



Referenced by \textbf{ db\+\_\+create\+\_\+record()}, \textbf{ db\+\_\+get\+\_\+data()}, \textbf{ db\+\_\+get\+\_\+id()}, \textbf{ db\+\_\+get\+\_\+next\+\_\+free\+\_\+id()}, \textbf{ db\+\_\+swap\+\_\+records()}, and \textbf{ raw\+\_\+db\+\_\+list\+\_\+table\+\_\+fields\+\_\+def()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_free\_result@{db\_free\_result}}
\index{db\_free\_result@{db\_free\_result}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_free\_result()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a60cc7e063480762705dd0f86f9f29f12} 
db\+\_\+free\+\_\+result (\begin{DoxyParamCaption}\item[{}]{\$result}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+free\+\_\+result()}{p.}{d9/d92/db__common_8inc_8php_a60cc7e063480762705dd0f86f9f29f12}


\begin{DoxyParams}{Parameters}
{\em \$result} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 721} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00722\ \{}
\DoxyCodeLine{00723\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_free\_result(\$result);}
\DoxyCodeLine{00724\ \}}

\end{DoxyCode}


References \textbf{ \$result}, and \textbf{ raw\+\_\+db\+\_\+free\+\_\+result()}.



Referenced by \textbf{ db\+\_\+get\+\_\+data()}, and \textbf{ db\+\_\+get\+\_\+id()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_get\_data@{db\_get\_data}}
\index{db\_get\_data@{db\_get\_data}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_get\_data()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a7bd603470b466f5d841634e4f2deb847} 
db\+\_\+get\+\_\+data (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$id}{ = {\ttfamily null}, }\item[{}]{\$col}{ = {\ttfamily null}, }\item[{}]{\$where}{ = {\ttfamily "{}"{}}, }\item[{}]{\$result\+\_\+type}{ = {\ttfamily \textbf{ FETCH\+\_\+\+NUM}}, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}, }\item[{}]{\$orderby}{ = {\ttfamily "{}"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+get\+\_\+data()}{p.}{d9/d92/db__common_8inc_8php_a7bd603470b466f5d841634e4f2deb847}

Reads data from table \$tablename.

\$tablename Table name. If NULL uses the table used in last function call. \$id Identifier(s). May be an array or a CSV string \$col Column(s) or field(s). May be an array or a CSV string \$where Additional WHERE clause \$result\+\_\+type May be FETCH\+\_\+\+ASSOC, FETCH\+\_\+\+BOTH or FETCH\+\_\+\+NUM \$idfield Name of id field \$orderby Additional ORDER BY clause\doxysubsubsection{\$id \$col returns}\label{db__common_8inc_8php_id-----col--------returns}
int null array with the whole record \$id int str the value of column \$col from record \$id int str[] array with column values in array \$col of record \$id int[] null array of arrays with values from all columns of the \$id registers int[] str array with the values of column \$col from the \$id registers int[] str[] 2-\/D array with the values of columns \$col from the \$id registers null null array of arrays with the whole table null str array with values of the \$col column from the whole table null str[] array of arrays with the values of the columns \$col from all table


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
unknown & {\em \$id} & \\
\hline
unknown & {\em \$col} & \\
\hline
string & {\em \$where} & \\
\hline
unknown & {\em \$result\+\_\+type} & \\
\hline
string & {\em \$idfield} & \\
\hline
string & {\em \$orderby} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
result or FALSE 
\end{DoxyReturn}


Definition at line \textbf{ 535} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00536\ \{}
\DoxyCodeLine{00537\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00540\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00541\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$col))}
\DoxyCodeLine{00544\ \ \ \ \ \$col\ =\ implode(\textcolor{stringliteral}{"{},"{}},\ \$col);}
\DoxyCodeLine{00545\ \ \ \textcolor{keywordflow}{if}\ (\$col\ ===\ \textcolor{keyword}{null}\ ||\ \$col\ ===\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00546\ \ \ \ \ \$col\ =\ \textcolor{stringliteral}{"{}*"{}};}
\DoxyCodeLine{00547\ \ \ \textcolor{comment}{//\ Build\ the\ WHERE\ clause}}
\DoxyCodeLine{00548\ \ \ \textcolor{keywordflow}{if}\ (\$id\ !==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_string(\$id)\ \&\&\ strstr(\$id,\ \textcolor{stringliteral}{"{},"{}}))\ \{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \$id\ =\ explode(\textcolor{stringliteral}{"{},"{}},\ \$id);}
\DoxyCodeLine{00551\ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$id))\ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \$idcond\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0;\ \$i\ <\ count(\$id);\ \$i++)}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \$idcond\ .=\ \textcolor{stringliteral}{"{}\$idfield\ =\ '\{\$id[\$i]\}'"{}}\ .\ (\$i\ <\ count(\$id)\ -\/\ 1\ ?\ \textcolor{stringliteral}{"{}\ OR\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00556\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \$idcond\ =\ \textcolor{stringliteral}{"{}\$idfield\ =\ '\$id'"{}};}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ \ \ \ \ \$condition\ =\ \$where\ ?\ \textcolor{stringliteral}{"{}\ WHERE\ (\$where)\ AND\ (\$idcond)"{}}\ :\ \textcolor{stringliteral}{"{}\ WHERE\ (\$idcond)"{}};}
\DoxyCodeLine{00560\ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00561\ \ \ \ \ \$condition\ =\ \$where\ ?\ \textcolor{stringliteral}{"{}\ WHERE\ (\$where)"{}}\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00562\ }
\DoxyCodeLine{00563\ \ \ \$orderby\ =\ \$orderby\ ?\ \textcolor{stringliteral}{"{}\ ORDER\ BY\ \$orderby"{}}\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00564\ \ \ \textcolor{comment}{//\ Do\ the\ query}}
\DoxyCodeLine{00565\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}SELECT\ \$col\ FROM\ "{}}\ .\ APPPREFIX\ .\ \$tablename\ .\ \$condition\ .\ \$orderby;}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00568\ \ \ \textcolor{keywordflow}{if}\ (!\$result)}
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00570\ \ \ \textcolor{comment}{//\ Loop\ to\ build\ the\ return\ array}}
\DoxyCodeLine{00571\ \ \ \$array\ =\ array();}
\DoxyCodeLine{00572\ \ \ \textcolor{keywordflow}{while}\ (\$row\ =\ db\_fetch\_array(\$result,\ \$result\_type))\ \{}
\DoxyCodeLine{00573\ \ \ \ \ \textcolor{keywordflow}{if}\ (count(\$row)\ ==\ 1)}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \$row\ =\ array\_shift(\$row);}
\DoxyCodeLine{00575\ \ \ \ \ \$array[]\ =\ \$row;}
\DoxyCodeLine{00576\ \ \ \}}
\DoxyCodeLine{00577\ \ \ \textcolor{keywordflow}{if}\ (db\_free\_result(\$result)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00578\ \ \ \textcolor{comment}{//\ Return\ the\ result}}
\DoxyCodeLine{00579\ \ \ \textcolor{keywordflow}{if}\ (!is\_array(\$array))}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordflow}{return}\ \$array;}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \textcolor{keywordflow}{switch}\ (count(\$array))\ \{}
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00585\ }
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ \ \ \ \ \$test\ =\ \$array;\ \textcolor{comment}{//\ Copy\ array}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \$elem\ =\ array\_shift(\$test);\ \textcolor{comment}{//\ 1st\ element\ of\ array...}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_null(\$elem))\ \textcolor{comment}{//\ ...is\ it\ null?}}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Yes:\ return\ null}}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_scalar(\$elem))\ \textcolor{comment}{//\ ...is\ it\ a\ scalar?}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$elem;\ \textcolor{comment}{//\ Yes:\ return\ the\ element\ alone}}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$array;\ \textcolor{comment}{//\ No:\ return\ the\ whole\ array}}
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$array;}
\DoxyCodeLine{00598\ \ \ \}}
\DoxyCodeLine{00599\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+fetch\+\_\+array()}, \textbf{ db\+\_\+free\+\_\+result()}, \textbf{ FETCH\+\_\+\+NUM}, and \textbf{ raw\+\_\+db\+\_\+query()}.



Referenced by \textbf{ db\+\_\+get\+\_\+index()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_get\_id@{db\_get\_id}}
\index{db\_get\_id@{db\_get\_id}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_get\_id()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a013284fcfe2e9831d68cd86b793a1d42} 
db\+\_\+get\+\_\+id (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$index}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+get\+\_\+id()}{p.}{d9/d92/db__common_8inc_8php_a013284fcfe2e9831d68cd86b793a1d42}

Returns the id of the record indexed by \$index


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
 & {\em \$index} & \\
\hline
string & {\em \$idfield} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
id or FALSE 
\end{DoxyReturn}


Definition at line \textbf{ 629} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00630\ \{}
\DoxyCodeLine{00631\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \textcolor{keywordflow}{if}\ (!is\_scalar(\$index))\ \{}
\DoxyCodeLine{00634\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ index\ must\ be\ an\ integer"{}});}
\DoxyCodeLine{00635\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00636\ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00637\ \ \ \ \ \$index\ =\ (int)\$index;}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00640\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00641\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \textcolor{comment}{//\ Do\ the\ query}}
\DoxyCodeLine{00644\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}SELECT\ \$idfield\ FROM\ "{}}\ .\ APPPREFIX\ .\ \$tablename\ .\ \textcolor{stringliteral}{"{}\ LIMIT\ 1\ OFFSET\ \$index"{}};}
\DoxyCodeLine{00645\ }
\DoxyCodeLine{00646\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00647\ \ \ \textcolor{keywordflow}{if}\ (!\$result)}
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \$ret\ =\ db\_fetch\_array(\$result,\ FETCH\_NUM);}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \textcolor{keywordflow}{if}\ (db\_free\_result(\$result)\ ===\ \textcolor{keyword}{false})}
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \ \ \textcolor{keywordflow}{return}\ \$ret[0];}
\DoxyCodeLine{00656\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+fetch\+\_\+array()}, \textbf{ db\+\_\+free\+\_\+result()}, \textbf{ FETCH\+\_\+\+NUM}, and \textbf{ raw\+\_\+db\+\_\+query()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_get\_index@{db\_get\_index}}
\index{db\_get\_index@{db\_get\_index}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_get\_index()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_aee9b4beb331414bb0a79ff61ce3f9587} 
db\+\_\+get\+\_\+index (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$id}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+get\+\_\+index()}{p.}{d9/d92/db__common_8inc_8php_aee9b4beb331414bb0a79ff61ce3f9587}

Returns the index of the record identified by \$id


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
 & {\em \$id} & \\
\hline
string & {\em \$idfield} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index or FALSE 
\end{DoxyReturn}


Definition at line \textbf{ 612} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00613\ \{}
\DoxyCodeLine{00614\ \ \ \$data\ =\ db\_get\_data(\$tablename,\ \textcolor{keyword}{null},\ \$idfield);}
\DoxyCodeLine{00615\ \ \ \textcolor{keywordflow}{return}\ array\_search(\$id,\ \$data);}
\DoxyCodeLine{00616\ \}}

\end{DoxyCode}


References \textbf{ db\+\_\+get\+\_\+data()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_get\_info@{db\_get\_info}}
\index{db\_get\_info@{db\_get\_info}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_get\_info()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a3f1807a54a74acfd3014cc5c6ffb6501} 
db\+\_\+get\+\_\+info (\begin{DoxyParamCaption}\item[{}]{\$info}{ = {\ttfamily "{}"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+get\+\_\+info()}{p.}{d9/d92/db__common_8inc_8php_a3f1807a54a74acfd3014cc5c6ffb6501} Returns database and wrapper version information


\begin{DoxyParams}[1]{Parameters}
string & {\em \$what} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Definition at line \textbf{ 35} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \ \ \textcolor{keywordflow}{switch}\ (strtolower(\$info))\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}version"{}}:}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DB\_DATABASE\ .\ \textcolor{stringliteral}{"{}\ "{}}\ .\ raw\_get\_db\_version()\ .\ \textcolor{stringliteral}{"{}\ with\ Database\ Wrapper\ "{}}\ .\ DB\_WRAPVERSION;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}dbtype"{}}:}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DB\_DATABASE;}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}dbversion"{}}:}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ raw\_get\_db\_version();}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}wrapversion"{}}:}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ DB\_WRAPVERSION;}
\DoxyCodeLine{00049\ \ \ \}}
\DoxyCodeLine{00050\ \}}

\end{DoxyCode}


References \textbf{ DB\+\_\+\+WRAPVERSION}, and \textbf{ raw\+\_\+get\+\_\+db\+\_\+version()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_get\_next\_free\_id@{db\_get\_next\_free\_id}}
\index{db\_get\_next\_free\_id@{db\_get\_next\_free\_id}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_get\_next\_free\_id()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a14c6dea7a68f757bca21db9b70b5454d} 
db\+\_\+get\+\_\+next\+\_\+free\+\_\+id (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+get\+\_\+next\+\_\+free\+\_\+id()}{p.}{d9/d92/db__common_8inc_8php_a14c6dea7a68f757bca21db9b70b5454d}

Returns the next available id in table \$tablename.


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
string & {\em \$idfield} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
id or FALSE 
\end{DoxyReturn}


Definition at line \textbf{ 667} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00668\ \{}
\DoxyCodeLine{00669\ \ \ global\ \$g\_current\_db;}
\DoxyCodeLine{00670\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00673\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00674\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00676\ \ \ \$sql\ =\ \textcolor{stringliteral}{"{}SELECT\ max(\$idfield)\ FROM\ "{}}\ .\ APPPREFIX\ .\ \$tablename;}
\DoxyCodeLine{00677\ \ \ \$result\ =\ raw\_db\_query(\$sql);}
\DoxyCodeLine{00678\ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00679\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00680\ \ \ \}}
\DoxyCodeLine{00681\ \ \ \$maxid\ =\ (db\_fetch\_array(\$result,\ FETCH\_NUM))\ ;}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \textcolor{keywordflow}{return}\ \$maxid[0]\ +\ 1;}
\DoxyCodeLine{00684\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+fetch\+\_\+array()}, \textbf{ FETCH\+\_\+\+NUM}, and \textbf{ raw\+\_\+db\+\_\+query()}.



Referenced by \textbf{ db\+\_\+swap\+\_\+records()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_list\_database\_tables@{db\_list\_database\_tables}}
\index{db\_list\_database\_tables@{db\_list\_database\_tables}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_list\_database\_tables()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a70afff13c59953e72dfeb19af325f03a} 
db\+\_\+list\+\_\+database\+\_\+tables (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+list\+\_\+database\+\_\+tables()}{p.}{d9/d92/db__common_8inc_8php_a70afff13c59953e72dfeb19af325f03a} Returns an array with the list of tables of the current database

\begin{DoxyReturn}{Returns}
result or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 88} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00090\ \ \ \$tables\ =\ raw\_db\_list\_database\_tables();}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{if}\ (!\$tables)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ \ \ \$tmp\_tabs\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00095\ \ \ \$prefixlen\ =\ strlen(trim(APPPREFIX));}
\DoxyCodeLine{00096\ \ \ \textcolor{keywordflow}{if}\ (\$prefixlen\ >\ 0)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{foreach}(\$tables\ as\ \$table)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stristr(substr(\$table,\ 0,\ \$prefixlen),\ APPPREFIX)\ ===\ \textcolor{keyword}{false}))\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \$tmp\_tabs[]\ =\ substr(\$table,\ strlen(APPPREFIX));}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{if}\ (\$tmp\_tabs\ ==\ \textcolor{stringliteral}{"{}"{}})\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordflow}{return}\ \$tmp\_tabs;}
\DoxyCodeLine{00106\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ \$tables;}
\DoxyCodeLine{00107\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+list\+\_\+database\+\_\+tables()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_list\_table\_fields@{db\_list\_table\_fields}}
\index{db\_list\_table\_fields@{db\_list\_table\_fields}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_list\_table\_fields()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a82a238eba2de474aa1ab173ac10f0f49} 
db\+\_\+list\+\_\+table\+\_\+fields (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$type}{ = {\ttfamily false}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+list\+\_\+table\+\_\+fields()}{p.}{d9/d92/db__common_8inc_8php_a82a238eba2de474aa1ab173ac10f0f49}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array with the names of the fields of table \$tablename or FALSE 
\end{DoxyReturn}


Definition at line \textbf{ 228} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00229\ \{}
\DoxyCodeLine{00230\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00233\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00234\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \$result\ =\ raw\_db\_list\_table\_fields\_def(APPPREFIX\ .\ \$tablename,\ \$type);}
\DoxyCodeLine{00237\ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{00238\ \}}

\end{DoxyCode}


References \textbf{ \$result}, and \textbf{ raw\+\_\+db\+\_\+list\+\_\+table\+\_\+fields\+\_\+def()}.



Referenced by \textbf{ db\+\_\+create\+\_\+record()}, and \textbf{ db\+\_\+edit\+\_\+record()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_open\_database@{db\_open\_database}}
\index{db\_open\_database@{db\_open\_database}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_open\_database()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ab34bbc980945b9c1d7bf58ea21f573ec} 
db\+\_\+open\+\_\+database (\begin{DoxyParamCaption}\item[{}]{\$database}{, }\item[{}]{\$server}{ = {\ttfamily "{}"{}}, }\item[{}]{\$username}{ = {\ttfamily "{}"{}}, }\item[{}]{\$password}{ = {\ttfamily "{}"{}}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+open\+\_\+database()}{p.}{d9/d92/db__common_8inc_8php_ab34bbc980945b9c1d7bf58ea21f573ec} Opens and connects an existing database.


\begin{DoxyParams}[1]{Parameters}
 & {\em \$database} & \\
\hline
string & {\em \$server} & \\
\hline
string & {\em \$username} & \\
\hline
string & {\em \$password} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
resource or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 62} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \{}
\DoxyCodeLine{00064\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_open\_database(\$database,\ \$server,\ \$username\ ,\ \$password);}
\DoxyCodeLine{00065\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+open\+\_\+database()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_query@{db\_query}}
\index{db\_query@{db\_query}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_query()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a9e096321b86945d128746ac7bedce8f3} 
db\+\_\+query (\begin{DoxyParamCaption}\item[{}]{\$query}{}\end{DoxyParamCaption})}

depricated exists only for compatibility to previous version is the same as raw\+\_\+db\+\_\+query does not handle APPPREFIX 

Definition at line \textbf{ 693} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00694\ \{}
\DoxyCodeLine{00695\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_query(\$query);}
\DoxyCodeLine{00696\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+query()}.



Referenced by \textbf{ raw\+\_\+db\+\_\+list\+\_\+table\+\_\+fields\+\_\+def()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_rename\_field@{db\_rename\_field}}
\index{db\_rename\_field@{db\_rename\_field}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_rename\_field()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ae1236b83d5ecbebf7a0ff2dac674619e} 
db\+\_\+rename\+\_\+field (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$field}{, }\item[{}]{\$newname}{, }\item[{}]{\$type}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+rename\+\_\+field()}{p.}{d9/d92/db__common_8inc_8php_ae1236b83d5ecbebf7a0ff2dac674619e}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$field} & \\
\hline
{\em \$newname} & \\
\hline
{\em \$type} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 274} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00275\ \{}
\DoxyCodeLine{00276\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_rename\_field(APPPREFIX\ .\ \$tablename,\ \$field,\ \$newname,\ \$type);}
\DoxyCodeLine{00277\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+rename\+\_\+field()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_rename\_table@{db\_rename\_table}}
\index{db\_rename\_table@{db\_rename\_table}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_rename\_table()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a15ceb027c54178332d6646e8ab743507} 
db\+\_\+rename\+\_\+table (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$newname}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+rename\+\_\+table()}{p.}{d9/d92/db__common_8inc_8php_a15ceb027c54178332d6646e8ab743507}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & \\
\hline
{\em \$newname} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} or "{}\+FALSE"{} 
\end{DoxyReturn}


Definition at line \textbf{ 218} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00219\ \{}
\DoxyCodeLine{00220\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_rename\_table(APPPREFIX\ .\ \$tablename,\ APPPREFIX\ .\ \$newname);}
\DoxyCodeLine{00221\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+rename\+\_\+table()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_swap\_records@{db\_swap\_records}}
\index{db\_swap\_records@{db\_swap\_records}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_swap\_records()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a111b2e22e83336d81be9c2fae45a8adb} 
db\+\_\+swap\+\_\+records (\begin{DoxyParamCaption}\item[{}]{\$tablename}{, }\item[{}]{\$id1}{, }\item[{}]{\$id2}{, }\item[{}]{\$idfield}{ = {\ttfamily "{}id"{}}, }\item[{}]{\$xchangeid}{ = {\ttfamily true}}\end{DoxyParamCaption})}

\doxyref{db\+\_\+swap\+\_\+records()}{p.}{d9/d92/db__common_8inc_8php_a111b2e22e83336d81be9c2fae45a8adb}

Swaps values from two records, including the id field or not according to \$xchangeid.


\begin{DoxyParams}[1]{Parameters}
 & {\em \$tablename} & \\
\hline
 & {\em \$id1} & \\
\hline
 & {\em \$id2} & \\
\hline
string & {\em \$idfield} & \\
\hline
boolean & {\em \$xchangeid} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}


Definition at line \textbf{ 457} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00458\ \{}
\DoxyCodeLine{00459\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00460\ \ \ \textcolor{comment}{//\ Table\ name}}
\DoxyCodeLine{00461\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00462\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00463\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00464\ \ \ \$table\ =\ APPPREFIX\ .\ \textcolor{stringliteral}{"{}\$tablename"{}};}
\DoxyCodeLine{00465\ \ \ \textcolor{comment}{//\ Build\ SQL\ strings}}
\DoxyCodeLine{00466\ \ \ \$result\ =\ raw\_db\_query(\textcolor{stringliteral}{"{}SELECT\ *\ FROM\ \$table\ WHERE\ \$idfield\ =\ \$id1"{}});}
\DoxyCodeLine{00467\ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00468\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ read\ record\ \$id1\ in\ table\ \$tablename."{}});}
\DoxyCodeLine{00469\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00470\ \ \ \}}
\DoxyCodeLine{00471\ \ \ \$a\ =\ db\_fetch\_array(\$result,\ FETCH\_ASSOC);}
\DoxyCodeLine{00472\ \ \ \$fieldvalues1\ =\ array\_values(\$a);}
\DoxyCodeLine{00473\ \ \ \$fieldnames1\ =\ array\_keys(\$a);}
\DoxyCodeLine{00474\ \ \ array\_shift(\$fieldvalues1);}
\DoxyCodeLine{00475\ \ \ array\_shift(\$fieldnames1);}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \$result\ =\ raw\_db\_query(\textcolor{stringliteral}{"{}SELECT\ *\ FROM\ \$table\ WHERE\ \$idfield\ =\ \$id2"{}});}
\DoxyCodeLine{00478\ \ \ \textcolor{keywordflow}{if}\ (!\$result)\ \{}
\DoxyCodeLine{00479\ \ \ \ \ trigger\_error(\_\_FUNCTION\_\_\ .\ \textcolor{stringliteral}{"{}:\ could\ not\ read\ record\ \$id2\ in\ table\ \$tablename."{}});}
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00481\ \ \ \}}
\DoxyCodeLine{00482\ \ \ \$a\ =\ db\_fetch\_array(\$result,\ FETCH\_ASSOC);}
\DoxyCodeLine{00483\ \ \ \$fieldvalues2\ =\ array\_values(\$a);}
\DoxyCodeLine{00484\ \ \ \$fieldnames2\ =\ array\_keys(\$a);}
\DoxyCodeLine{00485\ \ \ array\_shift(\$fieldvalues2);}
\DoxyCodeLine{00486\ \ \ array\_shift(\$fieldnames2);}
\DoxyCodeLine{00487\ \ \ \textcolor{comment}{//\ Exchange\ values}}
\DoxyCodeLine{00488\ \ \ \textcolor{keywordflow}{if}\ (db\_edit\_record(\$tablename,\ \$id1,\ \$fieldnames2,\ \$fieldvalues2,\ \$idfield)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00489\ \ \ \textcolor{keywordflow}{if}\ (db\_edit\_record(\$tablename,\ \$id2,\ \$fieldnames1,\ \$fieldvalues1,\ \$idfield)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00490\ \ \ \textcolor{comment}{//\ Exchange\ id's}}
\DoxyCodeLine{00491\ \ \ \textcolor{keywordflow}{if}\ (\$xchangeid)\ \{}
\DoxyCodeLine{00492\ \ \ \ \ \$unique\ =\ db\_get\_next\_free\_id(\$tablename);}
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{keywordflow}{if}\ (db\_edit\_record(\$tablename,\ \$id1,\ array(\$idfield),\ array(\$unique),\ \$idfield)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00494\ \ \ \ \ \textcolor{keywordflow}{if}\ (db\_edit\_record(\$tablename,\ \$id2,\ array(\$idfield),\ array(\$id1),\ \$idfield)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{keywordflow}{if}\ (db\_edit\_record(\$tablename,\ \$unique,\ array(\$idfield),\ array(\$id2),\ \$idfield)\ ===\ \textcolor{keyword}{false})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00496\ \ \ \}}
\DoxyCodeLine{00497\ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00498\ \}}

\end{DoxyCode}


References \textbf{ \$result}, \textbf{ db\+\_\+edit\+\_\+record()}, \textbf{ db\+\_\+fetch\+\_\+array()}, \textbf{ db\+\_\+get\+\_\+next\+\_\+free\+\_\+id()}, \textbf{ FETCH\+\_\+\+ASSOC}, and \textbf{ raw\+\_\+db\+\_\+query()}.

\index{db\_common.inc.php@{db\_common.inc.php}!db\_table\_exists@{db\_table\_exists}}
\index{db\_table\_exists@{db\_table\_exists}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{db\_table\_exists()}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a8168daf002dcfa31e047895b2d9505f2} 
db\+\_\+table\+\_\+exists (\begin{DoxyParamCaption}\item[{}]{\$tablename}{}\end{DoxyParamCaption})}

\doxyref{db\+\_\+table\+\_\+exists()}{p.}{d9/d92/db__common_8inc_8php_a8168daf002dcfa31e047895b2d9505f2}


\begin{DoxyParams}{Parameters}
{\em \$tablename} & of an opened database \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool "{}\+TRUE"{} if table \$tablename exists in the current database 
\end{DoxyReturn}


Definition at line \textbf{ 124} of file \textbf{ db\+\_\+common.\+inc.\+php}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00125\ \{}
\DoxyCodeLine{00126\ \ \ global\ \$g\_lasttable;}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \textcolor{keywordflow}{if}\ (!\$tablename)}
\DoxyCodeLine{00129\ \ \ \ \ \$tablename\ =\ \$g\_lasttable;}
\DoxyCodeLine{00130\ \ \ \$g\_lasttable\ =\ \$tablename;}
\DoxyCodeLine{00131\ \ \ \textcolor{keywordflow}{return}\ raw\_db\_table\_exists(APPPREFIX\ .\ \$tablename);}
\DoxyCodeLine{00132\ \}}

\end{DoxyCode}


References \textbf{ raw\+\_\+db\+\_\+table\+\_\+exists()}.



Referenced by \textbf{ db\+\_\+create\+\_\+table()}, and \textbf{ db\+\_\+delete\+\_\+table()}.



\label{doc-var-members}
\doxysubsection{Variable Documentation}
\index{db\_common.inc.php@{db\_common.inc.php}!\$\_mainpath@{\$\_mainpath}}
\index{\$\_mainpath@{\$\_mainpath}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{\$\_mainpath}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a1f2cbc875a889e2ec2fc74373e694f8f} 
\$\+\_\+mainpath = pathinfo(\+\_\+\+\_\+\+FILE\+\_\+\+\_\+)}



Definition at line \textbf{ 23} of file \textbf{ db\+\_\+common.\+inc.\+php}.

\index{db\_common.inc.php@{db\_common.inc.php}!DB\_WRAPVERSION@{DB\_WRAPVERSION}}
\index{DB\_WRAPVERSION@{DB\_WRAPVERSION}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{DB\_WRAPVERSION}
{\footnotesize\ttfamily \label{db__common_8inc_8php_a4862ba1e3cd909f934e9994619613c13} 
const DB\+\_\+\+WRAPVERSION "{}db\+\_\+v2b"{}}

WINBINDER -\/ The native Windows binding for PHP for PHP

Copyright Hypervisual -\/ see LICENSE.\+TXT for details Authors\+: Rubem Pechansky and Hans Rebel

Database wrapper functions for \doxyref{Win\+Binder}{p.}{d9/d34/class_win_binder} version 2b tested with SQLite and my\+SQL 7.\+mar 

Definition at line \textbf{ 18} of file \textbf{ db\+\_\+common.\+inc.\+php}.



Referenced by \textbf{ db\+\_\+get\+\_\+info()}.

\index{db\_common.inc.php@{db\_common.inc.php}!if@{if}}
\index{if@{if}!db\_common.inc.php@{db\_common.inc.php}}
\doxysubsubsection{if}
{\footnotesize\ttfamily \label{db__common_8inc_8php_ac6d5cdbd7a39e4195cd96a2fbeaf32ef} 
if(!defined("{}DB\+\_\+\+DATABASE"{})) define("{}DB\+\_\+\+DATABASE"{} (\begin{DoxyParamCaption}\item[{!}]{defined}{"{}\+APPPREFIX"{}}\end{DoxyParamCaption})}



Definition at line \textbf{ 20} of file \textbf{ db\+\_\+common.\+inc.\+php}.


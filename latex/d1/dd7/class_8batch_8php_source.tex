\doxysection{class.\+batch.\+php}
\label{class_8batch_8php_source}\index{E:/Bearsampp-\/development/sandbox/core/classes/class.batch.php@{E:/Bearsampp-\/development/sandbox/core/classes/class.batch.php}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ <?php}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ Copyright\ (c)\ 2021-\/2024\ Bearsampp}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ License:\ \ GNU\ General\ Public\ License\ version\ 3\ or\ later;\ see\ LICENSE.txt}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ Author:\ Bear}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Website:\ https://bearsampp.com}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ Github:\ https://github.com/Bearsampp}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }Batch}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{const}\ END\_PROCESS\_STR\ =\ \textcolor{stringliteral}{'FINISHED!'};}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{const}\ CATCH\_OUTPUT\_FALSE\ =\ \textcolor{stringliteral}{'bearsamppCatchOutputFalse'};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \_\_construct()}
\DoxyCodeLine{00039\ \ \ \ \ \{}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ writeLog(\$log)}
\DoxyCodeLine{00048\ \ \ \ \ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ global\ \$bearsamppRoot;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ Util::logDebug(\$log,\ \$bearsamppRoot-\/>getBatchLogFilePath());}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ findExeByPid(\$pid)}
\DoxyCodeLine{00060\ \ \ \ \ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \$result\ =\ self::exec(\textcolor{stringliteral}{'findExeByPid'},\ \textcolor{stringliteral}{'TASKLIST\ /FO\ CSV\ /NH\ /FI\ "{}PID\ eq\ '}\ .\ \$pid\ .\ \textcolor{charliteral}{'"{}'},\ 5);}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ !==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \$expResult\ =\ explode(\textcolor{stringliteral}{'"{},"{}'},\ \$result[0]);}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$expResult)\ \&\&\ count(\$expResult)\ >\ 2\ \&\&\ isset(\$expResult[0])\ \&\&\ !empty(\$expResult[0]))\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ substr(\$expResult[0],\ 1);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getProcessUsingPort(\$port)}
\DoxyCodeLine{00079\ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \$result\ =\ self::exec(\textcolor{stringliteral}{'getProcessUsingPort'},\ \textcolor{stringliteral}{'NETSTAT\ -\/aon'},\ 4);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ !==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$result\ as\ \$row)\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Util::startWith(\$row,\ \textcolor{stringliteral}{'TCP'}))\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$rowExp\ =\ explode(\textcolor{charliteral}{'\ '},\ preg\_replace(\textcolor{stringliteral}{'/\(\backslash\)s+/'},\ \textcolor{charliteral}{'\ '},\ \$row));}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (count(\$rowExp)\ ==\ 5\ \&\&\ Util::endWith(\$rowExp[1],\ \textcolor{charliteral}{':'}\ .\ \$port)\ \&\&\ \$rowExp[3]\ ==\ \textcolor{stringliteral}{'LISTENING'})\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$pid\ =\ intval(\$rowExp[4]);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$exe\ =\ self::findExeByPid(\$pid);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$exe\ !==\ \textcolor{keyword}{false})\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$exe\ .\ \textcolor{stringliteral}{'\ ('}\ .\ \$pid\ .\ \textcolor{charliteral}{')'};}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$pid;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ exitApp(\$restart\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{00107\ \ \ \ \ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ global\ \$bearsamppRoot,\ \$bearsamppCore;}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \$content\ =\ \textcolor{stringliteral}{'PING\ 1.1.1.1\ -\/n\ 1\ -\/w\ 2000\ >\ nul'}\ .\ PHP\_EOL;}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \$content\ .=\ \textcolor{charliteral}{'"{}'}\ .\ \$bearsamppRoot-\/>getExeFilePath()\ .\ \textcolor{stringliteral}{'"{}\ -\/quit\ -\/id=\{bearsampp\}'}\ .\ PHP\_EOL;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$restart)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \$basename\ =\ \textcolor{stringliteral}{'restartApp'};}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ Util::logInfo(\textcolor{stringliteral}{'Restart\ App'});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \$content\ .=\ \textcolor{charliteral}{'"{}'}\ .\ \$bearsamppCore-\/>getPhpExe()\ .\ \textcolor{stringliteral}{'"{}\ "{}'}\ .\ Core::isRoot\_FILE\ .\ \textcolor{stringliteral}{'"{}\ "{}'}\ .\ Action::RESTART\ .\ \textcolor{charliteral}{'"{}'}\ .\ PHP\_EOL;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \$basename\ =\ \textcolor{stringliteral}{'exitApp'};}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ Util::logInfo(\textcolor{stringliteral}{'Exit\ App'});}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ Win32Ps::killBins();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ self::execStandalone(\$basename,\ \$content);}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ restartApp()}
\DoxyCodeLine{00129\ \ \ \ \ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ self::exitApp(\textcolor{keyword}{true});}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getPearVersion()}
\DoxyCodeLine{00139\ \ \ \ \ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ global\ \$bearsamppBins;}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \$result\ =\ self::exec(\textcolor{stringliteral}{'getPearVersion'},\ \textcolor{stringliteral}{'CMD\ /C\ "{}'}\ .\ \$bearsamppBins-\/>getPhp()-\/>getPearExe()\ .\ \textcolor{stringliteral}{'"{}\ -\/V'},\ 5);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$result))\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$result\ as\ \$row)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Util::startWith(\$row,\ \textcolor{stringliteral}{'PEAR\ Version:'}))\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$expResult\ =\ explode(\textcolor{charliteral}{'\ '},\ \$row);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (count(\$expResult)\ ==\ 3)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ trim(\$expResult[2]);}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ refreshEnvVars()}
\DoxyCodeLine{00161\ \ \ \ \ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ global\ \$bearsamppRoot,\ \$bearsamppCore;}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ self::execStandalone(\textcolor{stringliteral}{'refreshEnvVars'},\ \textcolor{charliteral}{'"{}'}\ .\ \$bearsamppCore-\/>getSetEnvExe()\ .\ \textcolor{stringliteral}{'"{}\ -\/a\ '}\ .\ Registry::APP\_PATH\_REG\_ENTRY\ .\ \textcolor{stringliteral}{'\ "{}'}\ .\ Util::formatWindowsPath(\$bearsamppRoot-\/>getRootPath())\ .\ \textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ initializeMysql(\$path)}
\DoxyCodeLine{00172\ \ \ \ \ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!file\_exists(\$path\ .\ \textcolor{stringliteral}{'/init.bat'}))\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ Util::logWarning(\$path\ .\ \textcolor{stringliteral}{'/init.bat\ does\ not\ exist'});}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'initializeMysql'},\ \textcolor{stringliteral}{'CMD\ /C\ "{}'}\ .\ \$path\ .\ \textcolor{stringliteral}{'/init.bat"{}'},\ 60);}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ installPostgresqlService()}
\DoxyCodeLine{00186\ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ global\ \$bearsamppBins;}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \$cmd\ =\ \textcolor{charliteral}{'"{}'}\ .\ Util::formatWindowsPath(\$bearsamppBins-\/>getPostgresql()-\/>getCtlExe())\ .\ \textcolor{stringliteral}{'"{}\ register\ -\/N\ "{}'}\ .\ BinPostgresql::SERVICE\_NAME\ .\ \textcolor{charliteral}{'"{}'};}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \$cmd\ .=\ \textcolor{stringliteral}{'\ -\/U\ "{}LocalSystem"{}\ -\/D\ "{}'}\ .\ Util::formatWindowsPath(\$bearsamppBins-\/>getPostgresql()-\/>getSymlinkPath())\ .\ \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)data"{}'};}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \$cmd\ .=\ \textcolor{stringliteral}{'\ -\/l\ "{}'}\ .\ Util::formatWindowsPath(\$bearsamppBins-\/>getPostgresql()-\/>getErrorLog())\ .\ \textcolor{stringliteral}{'"{}\ -\/w'};}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'installPostgresqlService'},\ \$cmd,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$bearsamppBins-\/>getPostgresql()-\/>getService()-\/>isInstalled())\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ self::setServiceDisplayName(BinPostgresql::SERVICE\_NAME,\ \$bearsamppBins-\/>getPostgresql()-\/>getService()-\/>getDisplayName());}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ self::setServiceDescription(BinPostgresql::SERVICE\_NAME,\ \$bearsamppBins-\/>getPostgresql()-\/>getService()-\/>getDisplayName());}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ self::setServiceStartType(BinPostgresql::SERVICE\_NAME,\ \textcolor{stringliteral}{"{}demand"{}});}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ uninstallPostgresqlService()}
\DoxyCodeLine{00211\ \ \ \ \ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ global\ \$bearsamppBins;}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \$cmd\ =\ \textcolor{charliteral}{'"{}'}\ .\ Util::formatWindowsPath(\$bearsamppBins-\/>getPostgresql()-\/>getCtlExe())\ .\ \textcolor{stringliteral}{'"{}\ unregister\ -\/N\ "{}'}\ .\ BinPostgresql::SERVICE\_NAME\ .\ \textcolor{charliteral}{'"{}'};}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \$cmd\ .=\ \textcolor{stringliteral}{'\ -\/l\ "{}'}\ .\ Util::formatWindowsPath(\$bearsamppBins-\/>getPostgresql()-\/>getErrorLog())\ .\ \textcolor{stringliteral}{'"{}\ -\/w'};}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'uninstallPostgresqlService'},\ \$cmd,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !\$bearsamppBins-\/>getPostgresql()-\/>getService()-\/>isInstalled();}
\DoxyCodeLine{00218\ \ \ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ initializePostgresql(\$path)}
\DoxyCodeLine{00226\ \ \ \ \ \{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!file\_exists(\$path\ .\ \textcolor{stringliteral}{'/init.bat'}))\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ Util::logWarning(\$path\ .\ \textcolor{stringliteral}{'/init.bat\ does\ not\ exist'});}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'initializePostgresql'},\ \textcolor{stringliteral}{'CMD\ /C\ "{}'}\ .\ \$path\ .\ \textcolor{stringliteral}{'/init.bat"{}'},\ 15);}
\DoxyCodeLine{00232\ \ \ \ \ \}}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ createSymlink(\$src,\ \$dest)}
\DoxyCodeLine{00241\ \ \ \ \ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ global\ \$bearsamppCore;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \$src\ =\ Util::formatWindowsPath(\$src);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \$dest\ =\ Util::formatWindowsPath(\$dest);}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'createSymlink'},\ \textcolor{charliteral}{'"{}'}\ .\ \$bearsamppCore-\/>getLnExe()\ .\ \textcolor{stringliteral}{'"{}\ -\/-\/absolute\ -\/-\/symbolic\ -\/-\/traditional\ -\/-\/1023safe\ "{}'}\ .\ \$src\ .\ \textcolor{stringliteral}{'"{}\ '}\ .\ \textcolor{charliteral}{'"{}'}\ .\ \$dest\ .\ \textcolor{charliteral}{'"{}'},\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ removeSymlink(\$link)}
\DoxyCodeLine{00255\ \ \ \ \ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!file\_exists(\$link))\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ removeSymlink:\ Link\ does\ not\ exist:\ '}\ .\ \$link);}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ If\ the\ link\ doesn't\ exist,\ nothing\ to\ do}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ it's\ a\ directory\ symlink}}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \$isDirectory\ =\ is\_dir(\$link);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \$formattedLink\ =\ Util::formatWindowsPath(\$link);}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ different\ commands\ based\ on\ whether\ it's\ a\ directory\ or\ file\ symlink}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$isDirectory)\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ directory\ symlinks}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'removeSymlink'},\ \textcolor{stringliteral}{'rmdir\ /Q\ "{}'}\ .\ \$formattedLink\ .\ \textcolor{charliteral}{'"{}'},\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ file\ symlinks}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'removeSymlink'},\ \textcolor{stringliteral}{'del\ /F\ /Q\ "{}'}\ .\ \$formattedLink\ .\ \textcolor{charliteral}{'"{}'},\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ removal\ was\ successful}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (file\_exists(\$link))\ \{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ removeSymlink:\ Failed\ to\ remove\ symlink:\ '}\ .\ \$link);}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ removeSymlink:\ Successfully\ removed\ symlink:\ '}\ .\ \$link);}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (Exception\ \$e)\ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ removeSymlink:\ Exception:\ '}\ .\ \$e-\/>getMessage());}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \}}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getOsInfo()}
\DoxyCodeLine{00295\ \ \ \ \ \{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \$result\ =\ self::exec(\textcolor{stringliteral}{'getOsInfo'},\ \textcolor{stringliteral}{'ver'},\ 5);}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_array(\$result))\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$result\ as\ \$row)\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Util::startWith(\$row,\ \textcolor{stringliteral}{'Microsoft'}))\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ trim(\$row);}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{''};}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ setServiceDisplayName(\$serviceName,\ \$displayName)}
\DoxyCodeLine{00314\ \ \ \ \ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \$cmd\ =\ \textcolor{stringliteral}{'sc\ config\ '}\ .\ \$serviceName\ .\ \textcolor{stringliteral}{'\ DisplayName=\ "{}'}\ .\ \$displayName\ .\ \textcolor{charliteral}{'"{}'};}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'setServiceDisplayName'},\ \$cmd,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00317\ \ \ \ \ \}}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ setServiceDescription(\$serviceName,\ \$desc)}
\DoxyCodeLine{00326\ \ \ \ \ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \$cmd\ =\ \textcolor{stringliteral}{'sc\ description\ '}\ .\ \$serviceName\ .\ \textcolor{stringliteral}{'\ "{}'}\ .\ \$desc\ .\ \textcolor{charliteral}{'"{}'};}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'setServiceDescription'},\ \$cmd,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00329\ \ \ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ setServiceStartType(\$serviceName,\ \$startType)}
\DoxyCodeLine{00338\ \ \ \ \ \{}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \$cmd\ =\ \textcolor{stringliteral}{'sc\ config\ '}\ .\ \$serviceName\ .\ \textcolor{stringliteral}{'\ start=\ '}\ .\ \$startType;}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ self::exec(\textcolor{stringliteral}{'setServiceStartType'},\ \$cmd,\ \textcolor{keyword}{true},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00341\ \ \ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ execStandalone(\$basename,\ \$content,\ \$silent\ =\ \textcolor{keyword}{true})}
\DoxyCodeLine{00352\ \ \ \ \ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self::exec(\$basename,\ \$content,\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{true},\ \$silent);}
\DoxyCodeLine{00354\ \ \ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ exec(\$basename,\ \$content,\ \$timeout\ =\ \textcolor{keyword}{true},\ \$catchOutput\ =\ \textcolor{keyword}{true},\ \$standalone\ =\ \textcolor{keyword}{false},\ \$silent\ =\ \textcolor{keyword}{true},\ \$rebuild\ =\ \textcolor{keyword}{true})}
\DoxyCodeLine{00369\ \ \ \ \ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ global\ \$bearsamppConfig,\ \$bearsamppWinbinder;}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \$result\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \$resultFile\ =\ self::getTmpFile(\textcolor{stringliteral}{'.tmp'},\ \$basename);}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \$scriptPath\ =\ self::getTmpFile(\textcolor{stringliteral}{'.bat'},\ \$basename);}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \$checkFile\ =\ self::getTmpFile(\textcolor{stringliteral}{'.tmp'},\ \$basename);}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Redirect\ output}}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$catchOutput)\ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \$content\ .=\ \textcolor{stringliteral}{'>\ "{}'}\ .\ \$resultFile\ .\ \textcolor{charliteral}{'"{}'}\ .\ (!Util::endWith(\$content,\ \textcolor{charliteral}{'2'})\ ?\ \textcolor{stringliteral}{'\ 2>\&1'}\ :\ \textcolor{stringliteral}{''});}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Header}}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \$header\ =\ \textcolor{stringliteral}{'@ECHO\ OFF'}\ .\ PHP\_EOL\ .\ PHP\_EOL;}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Footer}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \$footer\ =\ PHP\_EOL\ .\ (!\$standalone\ ?\ PHP\_EOL\ .\ \textcolor{stringliteral}{'ECHO\ '}\ .\ self::END\_PROCESS\_STR\ .\ \textcolor{stringliteral}{'\ >\ "{}'}\ .\ \$checkFile\ .\ \textcolor{charliteral}{'"{}'}\ :\ \textcolor{stringliteral}{''});}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Process}}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ file\_put\_contents(\$scriptPath,\ \$header\ .\ \$content\ .\ \$footer);}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \$bearsamppWinbinder-\/>exec(\$scriptPath,\ \textcolor{keyword}{null},\ \$silent);}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\$standalone)\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \$timeout\ =\ is\_numeric(\$timeout)\ ?\ \$timeout\ :\ (\$timeout\ ===\ \textcolor{keyword}{true}\ ?\ \$bearsamppConfig-\/>getScriptsTimeout()\ :\ \textcolor{keyword}{false});}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \$maxtime\ =\ time()\ +\ \$timeout;}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \$noTimeout\ =\ \$timeout\ ===\ \textcolor{keyword}{false};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\$result\ ===\ \textcolor{keyword}{false}\ ||\ empty(\$result))\ \{}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (file\_exists(\$checkFile))\ \{}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$check\ =\ file(\$checkFile);}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$check)\ \&\&\ trim(\$check[0])\ ==\ self::END\_PROCESS\_STR)\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$catchOutput\ \&\&\ file\_exists(\$resultFile))\ \{}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ file(\$resultFile);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ self::CATCH\_OUTPUT\_FALSE;}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$maxtime\ <\ time()\ \&\&\ !\$noTimeout)\ \{}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'Exec:'});}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ basename:\ '}\ .\ \$basename);}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ content:\ '}\ .\ str\_replace(PHP\_EOL,\ \textcolor{stringliteral}{'\ \(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)\ '},\ \$content));}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ checkFile:\ '}\ .\ \$checkFile);}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ resultFile:\ '}\ .\ \$resultFile);}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ scriptPath:\ '}\ .\ \$scriptPath);}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$result\ !==\ \textcolor{keyword}{false}\ \&\&\ !empty(\$result)\ \&\&\ is\_array(\$result))\ \{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$rebuild)\ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$rebuildResult\ =\ array();}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$result\ as\ \$row)\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$row\ =\ trim(\$row);}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$row))\ \{}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$rebuildResult[]\ =\ \$row;}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$result\ =\ \$rebuildResult;}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ result:\ '}\ .\ substr(implode(\textcolor{stringliteral}{'\ \(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)\ '},\ \$result),\ 0,\ 2048));}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ self::writeLog(\textcolor{stringliteral}{'-\/>\ result:\ N/A'});}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{static}\ \textcolor{keyword}{function}\ getTmpFile(\$ext,\ \$customName\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{00447\ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ global\ \$bearsamppCore;}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Util::formatWindowsPath(\$bearsamppCore-\/>getTmpPath()\ .\ \textcolor{charliteral}{'/'}\ .\ (!empty(\$customName)\ ?\ \$customName\ .\ \textcolor{charliteral}{'-\/'}\ :\ \textcolor{stringliteral}{''})\ .\ Util::random()\ .\ \$ext);}
\DoxyCodeLine{00450\ \ \ \ \ \}}
\DoxyCodeLine{00451\ \}}

\end{DoxyCode}
